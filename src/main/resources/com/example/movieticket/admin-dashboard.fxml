<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.chart.BarChart?>
<?import javafx.scene.chart.CategoryAxis?>
<?import javafx.scene.chart.NumberAxis?>
<?import javafx.scene.chart.PieChart?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.Tab?>
<?import javafx.scene.control.TabPane?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<BorderPane stylesheets="@admin-dashboard-tabs.css" xmlns="http://javafx.com/javafx/24.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.example.movieticket.controller.AdminDashboardController">
    <top>
        <VBox style="-fx-background-color: linear-gradient(to right, #667eea, #764ba2);">
            <children>
                <HBox alignment="CENTER_LEFT" spacing="20.0" style="-fx-padding: 20 30;">
                    <children>
                        <Label style="-fx-text-fill: white; -fx-font-weight: 600;" text="ðŸŽ¬ Admin Dashboard">
                            <font>
                                <Font size="22.0" />
                            </font>
                        </Label>
                        <Region HBox.hgrow="ALWAYS" />
                        <Label fx:id="welcomeLabel" style="-fx-text-fill: rgba(255,255,255,0.9); -fx-font-size: 14px;" text="Welcome, Admin" />

                        <!-- Chat Management Button with Badge -->
                        <HBox alignment="CENTER" spacing="8.0">
                            <children>
                                <Button fx:id="chatManagementButton" mnemonicParsing="false" onAction="#handleChatManagement" style="-fx-background-color: rgba(255,255,255,0.2); -fx-text-fill: white; -fx-background-radius: 8; -fx-padding: 10 20; -fx-font-weight: 500; -fx-cursor: hand; -fx-border-color: rgba(255,255,255,0.3); -fx-border-radius: 8; -fx-border-width: 1;" text="ðŸ’¬ Messages" />
                                <Label fx:id="unreadMessagesLabel" style="-fx-background-color: #ff4757; -fx-text-fill: white; -fx-background-radius: 12; -fx-padding: 3 8; -fx-font-size: 11px; -fx-font-weight: bold;" text="0" visible="false" />
                            </children>
                        </HBox>

                        <Button mnemonicParsing="false" onAction="#handleLogout" style="-fx-background-color: rgba(255,255,255,0.15); -fx-text-fill: white; -fx-background-radius: 8; -fx-padding: 10 20; -fx-font-weight: 500; -fx-cursor: hand; -fx-border-color: rgba(255,255,255,0.3); -fx-border-radius: 8; -fx-border-width: 1;" text="Logout" />
                    </children>
                </HBox>
            </children>
        </VBox>
    </top>
    <center>
        <TabPane style="-fx-background-color: #f7f9fc; -fx-tab-min-height: 50px; -fx-tab-max-height: 50px;" tabClosingPolicy="UNAVAILABLE">
            <tabs>
                <Tab style="-fx-background-color: white; -fx-background-radius: 12 12 0 0; -fx-border-color: #667eea; -fx-border-width: 0 0 3 0; -fx-padding: 15 25; -fx-font-size: 14px; -fx-font-weight: 600;" text="  ðŸ“Š Dashboard  ">
                    <content>
                        <ScrollPane fitToHeight="false" fitToWidth="true" style="-fx-background-color: #f7f9fc; -fx-background: #f7f9fc;">
                            <content>
                                <VBox spacing="25.0" style="-fx-padding: 30; -fx-background-color: #f7f9fc;">
                                    <children>
                                        <HBox alignment="CENTER_LEFT" spacing="10.0">
                                            <children>
                                                <VBox spacing="5.0">
                                                    <children>
                                                        <Label style="-fx-font-weight: 600; -fx-text-fill: #2d3436; -fx-font-size: 24px;" text="Dashboard Overview" />
                                                        <Label style="-fx-text-fill: #636e72; -fx-font-size: 13px;" text="Monitor your business metrics at a glance" />
                                                    </children>
                                                </VBox>
                                                <Region HBox.hgrow="ALWAYS" />
                                                <Button mnemonicParsing="false" onAction="#handleRefreshDashboard" style="-fx-background-color: white; -fx-text-fill: #667eea; -fx-padding: 12 24; -fx-background-radius: 10; -fx-cursor: hand; -fx-font-weight: 500; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.08), 8, 0, 0, 2); -fx-border-color: #667eea; -fx-border-radius: 10; -fx-border-width: 1.5;" text="ðŸ”„ Refresh" />
                                            </children>
                                        </HBox>

                                        <!-- Stats Cards -->
                                        <HBox spacing="20.0">
                                            <children>
                                                <VBox alignment="TOP_LEFT" spacing="12.0" style="-fx-background-color: white; -fx-padding: 25; -fx-background-radius: 12; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.06), 10, 0, 0, 3);" HBox.hgrow="ALWAYS">
                                                    <children>
                                                        <HBox alignment="CENTER_LEFT" spacing="10.0">
                                                            <children>
                                                                <Label style="-fx-background-color: #e3f2fd; -fx-text-fill: #1e88e5; -fx-padding: 10; -fx-background-radius: 10; -fx-font-size: 20px;" text="ðŸŽ«" />
                                                                <VBox spacing="2.0">
                                                                    <children>
                                                                        <Label style="-fx-text-fill: #636e72; -fx-font-size: 12px; -fx-font-weight: 500;" text="Total Tickets" />
                                                                        <Label fx:id="totalTicketsLabel" style="-fx-text-fill: #2d3436; -fx-font-size: 28px; -fx-font-weight: 700;" text="0" />
                                                                    </children>
                                                                </VBox>
                                                            </children>
                                                        </HBox>
                                                    </children>
                                                </VBox>

                                                <VBox alignment="TOP_LEFT" spacing="12.0" style="-fx-background-color: white; -fx-padding: 25; -fx-background-radius: 12; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.06), 10, 0, 0, 3);" HBox.hgrow="ALWAYS">
                                                    <children>
                                                        <HBox alignment="CENTER_LEFT" spacing="10.0">
                                                            <children>
                                                                <Label style="-fx-background-color: #e8f5e9; -fx-text-fill: #43a047; -fx-padding: 10; -fx-background-radius: 10; -fx-font-size: 20px;" text="ðŸ’°" />
                                                                <VBox spacing="2.0">
                                                                    <children>
                                                                        <Label style="-fx-text-fill: #636e72; -fx-font-size: 12px; -fx-font-weight: 500;" text="Total Revenue" />
                                                                        <Label fx:id="totalRevenueLabel" style="-fx-text-fill: #2d3436; -fx-font-size: 28px; -fx-font-weight: 700;" text="0.00" />
                                                                    </children>
                                                                </VBox>
                                                            </children>
                                                        </HBox>
                                                    </children>
                                                </VBox>

                                                <VBox alignment="TOP_LEFT" spacing="12.0" style="-fx-background-color: white; -fx-padding: 25; -fx-background-radius: 12; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.06), 10, 0, 0, 3);" HBox.hgrow="ALWAYS">
                                                    <children>
                                                        <HBox alignment="CENTER_LEFT" spacing="10.0">
                                                            <children>
                                                                <Label style="-fx-background-color: #fff3e0; -fx-text-fill: #fb8c00; -fx-padding: 10; -fx-background-radius: 10; -fx-font-size: 20px;" text="ðŸŽ¬" />
                                                                <VBox spacing="2.0">
                                                                    <children>
                                                                        <Label style="-fx-text-fill: #636e72; -fx-font-size: 12px; -fx-font-weight: 500;" text="Movies" />
                                                                        <Label fx:id="availableMoviesLabel" style="-fx-text-fill: #2d3436; -fx-font-size: 28px; -fx-font-weight: 700;" text="0" />
                                                                    </children>
                                                                </VBox>
                                                            </children>
                                                        </HBox>
                                                    </children>
                                                </VBox>

                                                <VBox alignment="TOP_LEFT" spacing="12.0" style="-fx-background-color: white; -fx-padding: 25; -fx-background-radius: 12; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.06), 10, 0, 0, 3);" HBox.hgrow="ALWAYS">
                                                    <children>
                                                        <HBox alignment="CENTER_LEFT" spacing="10.0">
                                                            <children>
                                                                <Label style="-fx-background-color: #f3e5f5; -fx-text-fill: #8e24aa; -fx-padding: 10; -fx-background-radius: 10; -fx-font-size: 20px;" text="ðŸ‘¥" />
                                                                <VBox spacing="2.0">
                                                                    <children>
                                                                        <Label style="-fx-text-fill: #636e72; -fx-font-size: 12px; -fx-font-weight: 500;" text="Users" />
                                                                        <Label fx:id="totalUsersLabel" style="-fx-text-fill: #2d3436; -fx-font-size: 28px; -fx-font-weight: 700;" text="0" />
                                                                    </children>
                                                                </VBox>
                                                            </children>
                                                        </HBox>
                                                    </children>
                                                </VBox>

                                                <VBox alignment="TOP_LEFT" spacing="12.0" style="-fx-background-color: white; -fx-padding: 25; -fx-background-radius: 12; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.06), 10, 0, 0, 3);" HBox.hgrow="ALWAYS">
                                                    <children>
                                                        <HBox alignment="CENTER_LEFT" spacing="10.0">
                                                            <children>
                                                                <Label style="-fx-background-color: #fce4ec; -fx-text-fill: #e91e63; -fx-padding: 10; -fx-background-radius: 10; -fx-font-size: 20px;" text="â­" />
                                                                <VBox spacing="2.0">
                                                                    <children>
                                                                        <Label style="-fx-text-fill: #636e72; -fx-font-size: 12px; -fx-font-weight: 500;" text="Reviews" />
                                                                        <Label fx:id="totalReviewsLabel" style="-fx-text-fill: #2d3436; -fx-font-size: 28px; -fx-font-weight: 700;" text="0" />
                                                                    </children>
                                                                </VBox>
                                                            </children>
                                                        </HBox>
                                                    </children>
                                                </VBox>
                                            </children>
                                        </HBox>

                                        <!-- Charts Section -->
                                        <VBox spacing="10.0">
                                            <children>
                                                <Label style="-fx-font-weight: 600; -fx-text-fill: #2d3436; -fx-font-size: 20px;" text="Analytics" />
                                                <Label style="-fx-text-fill: #636e72; -fx-font-size: 13px;" text="Visual insights and performance metrics" />
                                            </children>
                                        </VBox>

                                        <HBox spacing="20.0" VBox.vgrow="ALWAYS">
                                            <children>
                                                <!-- Pie Charts Column -->
                                                <VBox spacing="20.0" style="-fx-padding: 25; -fx-background-color: white; -fx-background-radius: 12; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.06), 10, 0, 0, 3);" HBox.hgrow="ALWAYS">
                                                    <children>
                                                        <Label style="-fx-font-weight: 600; -fx-font-size: 15px; -fx-text-fill: #2d3436;" text="ðŸ“Š Bookings by Status" />
                                                        <PieChart fx:id="bookingStatusChart" legendVisible="true" prefHeight="250.0" style="-fx-background-color: transparent;" />

                                                        <Label style="-fx-font-weight: 600; -fx-font-size: 15px; -fx-text-fill: #2d3436; -fx-padding: 15 0 0 0;" text="ðŸŽ­ Movies by Genre" />
                                                        <PieChart fx:id="moviesGenreChart" legendVisible="true" prefHeight="250.0" style="-fx-background-color: transparent;" />
                                                    </children>
                                                </VBox>

                                                <!-- Bar Chart Column -->
                                                <VBox spacing="15.0" style="-fx-padding: 25; -fx-background-color: white; -fx-background-radius: 12; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.06), 10, 0, 0, 3);" HBox.hgrow="ALWAYS">
                                                    <children>
                                                        <Label style="-fx-font-weight: 600; -fx-font-size: 15px; -fx-text-fill: #2d3436;" text="ðŸ’° Top Movies by Revenue" />
                                                        <BarChart fx:id="revenueByMovieChart" legendVisible="false" prefHeight="530.0" style="-fx-background-color: transparent;">
                                                            <xAxis>
                                                                <CategoryAxis side="BOTTOM" />
                                                            </xAxis>
                                                            <yAxis>
                                                                <NumberAxis label="Revenue ($)" side="LEFT" />
                                                            </yAxis>
                                                        </BarChart>
                                                    </children>
                                                </VBox>
                                            </children>
                                        </HBox>
                                    </children>
                                </VBox>
                            </content>
                        </ScrollPane>
                    </content>
                </Tab>
                <Tab style="-fx-background-color: white; -fx-background-radius: 12 12 0 0; -fx-border-color: #667eea; -fx-border-width: 0 0 3 0; -fx-padding: 15 25; -fx-font-size: 14px; -fx-font-weight: 600;" text="  ðŸŽ¬ Movies  ">
                    <content>
                        <ScrollPane fitToHeight="false" fitToWidth="true" style="-fx-background-color: #f7f9fc; -fx-background: #f7f9fc;">
                            <content>
                                <VBox spacing="20.0" style="-fx-padding: 30; -fx-background-color: #f7f9fc;">
                                    <children>
                                        <HBox alignment="CENTER_LEFT" spacing="10.0">
                                            <children>
                                                <VBox spacing="5.0">
                                                    <children>
                                                        <Label style="-fx-font-weight: 600; -fx-text-fill: #2d3436; -fx-font-size: 24px;" text="Movies" />
                                                        <Label style="-fx-text-fill: #636e72; -fx-font-size: 13px;" text="Manage your movie catalog" />
                                                    </children>
                                                </VBox>
                                                <Region HBox.hgrow="ALWAYS" />
                                                <TextField fx:id="movieSearchField" onKeyReleased="#handleSearchMovies" promptText="Search movies..." style="-fx-background-radius: 10; -fx-padding: 10 15; -fx-border-color: #dfe6e9; -fx-border-radius: 10; -fx-border-width: 1.5; -fx-background-color: white; -fx-font-size: 13px; -fx-pref-width: 250;" />
                                                <Button mnemonicParsing="false" onAction="#handleSearchMovies" style="-fx-background-color: #667eea; -fx-text-fill: white; -fx-padding: 10 20; -fx-background-radius: 10; -fx-cursor: hand; -fx-font-weight: 500;" text="Search" />
                                                <Button mnemonicParsing="false" onAction="#handleRefreshMovies" style="-fx-background-color: white; -fx-text-fill: #667eea; -fx-padding: 10 20; -fx-background-radius: 10; -fx-cursor: hand; -fx-font-weight: 500; -fx-border-color: #667eea; -fx-border-radius: 10; -fx-border-width: 1.5;" text="ðŸ”„ Refresh" />
                                            </children>
                                        </HBox>
                                        <HBox spacing="12.0">
                                            <children>
                                                <Button mnemonicParsing="false" onAction="#handleAddMovie" style="-fx-background-color: #00b894; -fx-text-fill: white; -fx-padding: 10 20; -fx-background-radius: 10; -fx-cursor: hand; -fx-font-weight: 500;" text="+ Add Movie" />
                                                <Button mnemonicParsing="false" onAction="#handleEditMovie" style="-fx-background-color: #fdcb6e; -fx-text-fill: white; -fx-padding: 10 20; -fx-background-radius: 10; -fx-cursor: hand; -fx-font-weight: 500;" text="Edit Movie" />
                                                <Button mnemonicParsing="false" onAction="#handleDeleteMovie" style="-fx-background-color: #ff7675; -fx-text-fill: white; -fx-padding: 10 20; -fx-background-radius: 10; -fx-cursor: hand; -fx-font-weight: 500;" text="Delete Movie" />
                                            </children>
                                        </HBox>
                                        <VBox style="-fx-background-color: white; -fx-background-radius: 12; -fx-padding: 20; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.06), 10, 0, 0, 3);">
                                            <children>
                                                <TableView fx:id="moviesTable" prefHeight="500.0" style="-fx-background-color: transparent;">
                                                    <columns>
                                                        <TableColumn fx:id="movieTitleColumn" prefWidth="200.0" text="Title" />
                                                        <TableColumn fx:id="movieDirectorColumn" prefWidth="150.0" text="Director" />
                                                        <TableColumn fx:id="movieGenreColumn" prefWidth="100.0" text="Genre" />
                                                        <TableColumn fx:id="movieYearColumn" prefWidth="80.0" text="Year" />
                                                        <TableColumn fx:id="movieDurationColumn" prefWidth="100.0" text="Duration (min)" />
                                                        <TableColumn fx:id="movieRatingColumn" prefWidth="80.0" text="Rating" />
                                                    </columns>
                                                </TableView>
                                            </children>
                                        </VBox>
                                    </children>
                                </VBox>
                            </content>
                        </ScrollPane>
                    </content>
                </Tab>
                <Tab style="-fx-background-color: white; -fx-background-radius: 12 12 0 0; -fx-border-color: #667eea; -fx-border-width: 0 0 3 0; -fx-padding: 15 25; -fx-font-size: 14px; -fx-font-weight: 600;" text="  ðŸŽ­ Screenings  ">
                    <content>
                        <ScrollPane fitToHeight="false" fitToWidth="true" style="-fx-background-color: #f7f9fc; -fx-background: #f7f9fc;">
                            <content>
                                <VBox spacing="20.0" style="-fx-padding: 30; -fx-background-color: #f7f9fc;">
                                    <children>
                                        <HBox alignment="CENTER_LEFT" spacing="10.0">
                                            <children>
                                                <VBox spacing="5.0">
                                                    <children>
                                                        <Label style="-fx-font-weight: 600; -fx-text-fill: #2d3436; -fx-font-size: 24px;" text="Screenings" />
                                                        <Label style="-fx-text-fill: #636e72; -fx-font-size: 13px;" text="Manage movie screenings and showtimes" />
                                                    </children>
                                                </VBox>
                                                <Region HBox.hgrow="ALWAYS" />
                                                <Button mnemonicParsing="false" onAction="#handleRefreshScreenings" style="-fx-background-color: white; -fx-text-fill: #667eea; -fx-padding: 12 24; -fx-background-radius: 10; -fx-cursor: hand; -fx-font-weight: 500; -fx-border-color: #667eea; -fx-border-radius: 10; -fx-border-width: 1.5;" text="ðŸ”„ Refresh" />
                                            </children>
                                        </HBox>
                                        <HBox spacing="12.0">
                                            <children>
                                                <Button mnemonicParsing="false" onAction="#handleAddScreening" style="-fx-background-color: #00b894; -fx-text-fill: white; -fx-padding: 10 20; -fx-background-radius: 10; -fx-cursor: hand; -fx-font-weight: 500;" text="+ Add Screening" />
                                                <Button mnemonicParsing="false" onAction="#handleEditScreening" style="-fx-background-color: #fdcb6e; -fx-text-fill: white; -fx-padding: 10 20; -fx-background-radius: 10; -fx-cursor: hand; -fx-font-weight: 500;" text="Edit Screening" />
                                                <Button mnemonicParsing="false" onAction="#handleDeleteScreening" style="-fx-background-color: #ff7675; -fx-text-fill: white; -fx-padding: 10 20; -fx-background-radius: 10; -fx-cursor: hand; -fx-font-weight: 500;" text="Delete Screening" />
                                            </children>
                                        </HBox>
                                        <VBox style="-fx-background-color: white; -fx-background-radius: 12; -fx-padding: 20; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.06), 10, 0, 0, 3);">
                                            <children>
                                                <TableView fx:id="screeningsTable" prefHeight="500.0" style="-fx-background-color: transparent;">
                                                    <columns>
                                                        <TableColumn fx:id="screeningMovieColumn" prefWidth="180.0" text="Movie" />
                                                        <TableColumn fx:id="screeningScreenColumn" prefWidth="100.0" text="Screen" />
                                                        <TableColumn fx:id="screeningDateTimeColumn" prefWidth="150.0" text="Date and Time" />
                                                        <TableColumn fx:id="screeningPriceColumn" prefWidth="80.0" text="Price" />
                                                        <TableColumn fx:id="screeningAvailableSeatsColumn" prefWidth="120.0" text="Available Seats" />
                                                    </columns>
                                                </TableView>
                                            </children>
                                        </VBox>
                                    </children>
                                </VBox>
                            </content>
                        </ScrollPane>
                    </content>
                </Tab>
                <Tab style="-fx-background-color: white; -fx-background-radius: 12 12 0 0; -fx-border-color: #667eea; -fx-border-width: 0 0 3 0; -fx-padding: 15 25; -fx-font-size: 14px; -fx-font-weight: 600;" text="  ðŸ‘¥ Users  ">
                    <content>
                        <ScrollPane fitToHeight="false" fitToWidth="true" style="-fx-background-color: #f7f9fc; -fx-background: #f7f9fc;">
                            <content>
                                <VBox spacing="20.0" style="-fx-padding: 30; -fx-background-color: #f7f9fc;">
                                    <children>
                                        <HBox alignment="CENTER_LEFT" spacing="10.0">
                                            <children>
                                                <VBox spacing="5.0">
                                                    <children>
                                                        <Label style="-fx-font-weight: 600; -fx-text-fill: #2d3436; -fx-font-size: 24px;" text="Users" />
                                                        <Label style="-fx-text-fill: #636e72; -fx-font-size: 13px;" text="Manage user accounts and permissions" />
                                                    </children>
                                                </VBox>
                                                <Region HBox.hgrow="ALWAYS" />
                                                <TextField fx:id="userSearchField" onKeyReleased="#handleSearchUsers" promptText="Search users..." style="-fx-background-radius: 10; -fx-padding: 10 15; -fx-border-color: #dfe6e9; -fx-border-radius: 10; -fx-border-width: 1.5; -fx-background-color: white; -fx-font-size: 13px; -fx-pref-width: 250;" />
                                                <Button mnemonicParsing="false" onAction="#handleSearchUsers" style="-fx-background-color: #667eea; -fx-text-fill: white; -fx-padding: 10 20; -fx-background-radius: 10; -fx-cursor: hand; -fx-font-weight: 500;" text="Search" />
                                                <Button mnemonicParsing="false" onAction="#handleRefreshUsers" style="-fx-background-color: white; -fx-text-fill: #667eea; -fx-padding: 10 20; -fx-background-radius: 10; -fx-cursor: hand; -fx-font-weight: 500; -fx-border-color: #667eea; -fx-border-radius: 10; -fx-border-width: 1.5;" text="ðŸ”„ Refresh" />
                                            </children>
                                        </HBox>
                                        <HBox spacing="12.0">
                                            <children>
                                                <Button mnemonicParsing="false" onAction="#handleAddUser" style="-fx-background-color: #00b894; -fx-text-fill: white; -fx-padding: 10 20; -fx-background-radius: 10; -fx-cursor: hand; -fx-font-weight: 500;" text="+ Add User" />
                                                <Button mnemonicParsing="false" onAction="#handleEditUser" style="-fx-background-color: #fdcb6e; -fx-text-fill: white; -fx-padding: 10 20; -fx-background-radius: 10; -fx-cursor: hand; -fx-font-weight: 500;" text="Edit User" />
                                                <Button mnemonicParsing="false" onAction="#handleDeleteUser" style="-fx-background-color: #ff7675; -fx-text-fill: white; -fx-padding: 10 20; -fx-background-radius: 10; -fx-cursor: hand; -fx-font-weight: 500;" text="Delete User" />
                                            </children>
                                        </HBox>
                                        <VBox style="-fx-background-color: white; -fx-background-radius: 12; -fx-padding: 20; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.06), 10, 0, 0, 3);">
                                            <children>
                                                <TableView fx:id="usersTable" prefHeight="500.0" style="-fx-background-color: transparent;">
                                                    <columns>
                                                        <TableColumn fx:id="userIdColumn" prefWidth="80.0" text="User ID" />
                                                        <TableColumn fx:id="userUsernameColumn" prefWidth="150.0" text="Username" />
                                                        <TableColumn fx:id="userFullNameColumn" prefWidth="200.0" text="Full Name" />
                                                        <TableColumn fx:id="userEmailColumn" prefWidth="200.0" text="Email" />
                                                        <TableColumn fx:id="userRoleColumn" prefWidth="100.0" text="Role" />
                                                    </columns>
                                                </TableView>
                                            </children>
                                        </VBox>
                                    </children>
                                </VBox>
                            </content>
                        </ScrollPane>
                    </content>
                </Tab>
                <Tab style="-fx-background-color: white; -fx-background-radius: 12 12 0 0; -fx-border-color: #667eea; -fx-border-width: 0 0 3 0; -fx-padding: 15 25; -fx-font-size: 14px; -fx-font-weight: 600;" text="  â­ Reviews  ">
                    <content>
                        <ScrollPane fitToHeight="false" fitToWidth="true" style="-fx-background-color: #f7f9fc; -fx-background: #f7f9fc;">
                            <content>
                                <VBox spacing="25.0" style="-fx-padding: 30; -fx-background-color: #f7f9fc;">
                                    <children>
                                        <!-- Header Section -->
                                        <HBox alignment="CENTER_LEFT" spacing="10.0">
                                            <children>
                                                <VBox spacing="5.0">
                                                    <children>
                                                        <Label style="-fx-font-weight: 600; -fx-text-fill: #2d3436; -fx-font-size: 24px;" text="Reviews" />
                                                        <Label style="-fx-text-fill: #636e72; -fx-font-size: 13px;" text="Monitor and manage user reviews" />
                                                    </children>
                                                </VBox>
                                                <Region HBox.hgrow="ALWAYS" />
                                                <Button mnemonicParsing="false" onAction="#handleRefreshReviews" style="-fx-background-color: white; -fx-text-fill: #667eea; -fx-padding: 12 24; -fx-background-radius: 10; -fx-cursor: hand; -fx-font-weight: 500; -fx-border-color: #667eea; -fx-border-radius: 10; -fx-border-width: 1.5;" text="ðŸ”„ Refresh" />
                                            </children>
                                        </HBox>

                                        <!-- Review Statistics Cards -->
                                        <HBox spacing="20.0">
                                            <children>
                                                <VBox alignment="CENTER" spacing="10.0" style="-fx-background-color: white; -fx-padding: 25; -fx-background-radius: 12; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.06), 10, 0, 0, 3);" HBox.hgrow="ALWAYS">
                                                    <children>
                                                        <Label style="-fx-background-color: #e3f2fd; -fx-text-fill: #1e88e5; -fx-padding: 12; -fx-background-radius: 12; -fx-font-size: 24px;" text="ðŸ“" />
                                                        <Label style="-fx-text-fill: #636e72; -fx-font-weight: 500; -fx-font-size: 12px;" text="Total Reviews" />
                                                        <Label fx:id="reviewCountLabel" style="-fx-text-fill: #2d3436; -fx-font-size: 32px; -fx-font-weight: 700;" text="0" />
                                                    </children>
                                                </VBox>
                                                <VBox alignment="CENTER" spacing="10.0" style="-fx-background-color: white; -fx-padding: 25; -fx-background-radius: 12; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.06), 10, 0, 0, 3);" HBox.hgrow="ALWAYS">
                                                    <children>
                                                        <Label style="-fx-background-color: #fff3e0; -fx-text-fill: #fb8c00; -fx-padding: 12; -fx-background-radius: 12; -fx-font-size: 24px;" text="â­" />
                                                        <Label style="-fx-text-fill: #636e72; -fx-font-weight: 500; -fx-font-size: 12px;" text="Average Rating" />
                                                        <Label fx:id="averageRatingAdminLabel" style="-fx-text-fill: #2d3436; -fx-font-size: 32px; -fx-font-weight: 700;" text="0.0" />
                                                    </children>
                                                </VBox>
                                                <VBox alignment="CENTER" spacing="10.0" style="-fx-background-color: white; -fx-padding: 25; -fx-background-radius: 12; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.06), 10, 0, 0, 3);" HBox.hgrow="ALWAYS">
                                                    <children>
                                                        <Label style="-fx-background-color: #e8f5e9; -fx-text-fill: #43a047; -fx-padding: 12; -fx-background-radius: 12; -fx-font-size: 24px;" text="ðŸŒŸ" />
                                                        <Label style="-fx-text-fill: #636e72; -fx-font-weight: 500; -fx-font-size: 12px;" text="5-Star Reviews" />
                                                        <Label fx:id="fiveStarCountLabel" style="-fx-text-fill: #2d3436; -fx-font-size: 32px; -fx-font-weight: 700;" text="0" />
                                                    </children>
                                                </VBox>
                                            </children>
                                        </HBox>

                                        <!-- Rating Distribution Chart -->
                                        <VBox style="-fx-padding: 25; -fx-background-color: white; -fx-background-radius: 12; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.06), 10, 0, 0, 3);">
                                            <children>
                                                <Label style="-fx-font-weight: 600; -fx-font-size: 15px; -fx-text-fill: #2d3436; -fx-padding: 0 0 15 0;" text="â­ Rating Distribution" />
                                                <BarChart fx:id="ratingDistributionChart" legendVisible="false" prefHeight="220.0" style="-fx-background-color: transparent;">
                                                    <xAxis>
                                                        <CategoryAxis label="Rating Stars" side="BOTTOM" />
                                                    </xAxis>
                                                    <yAxis>
                                                        <NumberAxis label="Number of Reviews" side="LEFT" />
                                                    </yAxis>
                                                </BarChart>
                                            </children>
                                        </VBox>

                                        <!-- Search and Filter Section -->
                                        <VBox spacing="15.0" style="-fx-background-color: white; -fx-padding: 25; -fx-background-radius: 12; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.06), 10, 0, 0, 3);">
                                            <children>
                                                <HBox alignment="CENTER_LEFT" spacing="15.0">
                                                    <children>
                                                        <VBox spacing="8.0" HBox.hgrow="ALWAYS">
                                                            <children>
                                                                <Label style="-fx-font-weight: 500; -fx-text-fill: #2d3436; -fx-font-size: 13px;" text="Search Reviews" />
                                                                <TextField fx:id="reviewSearchField" prefWidth="300.0" promptText="Search by user, title, or comment..." style="-fx-background-radius: 10; -fx-padding: 10 15; -fx-border-color: #dfe6e9; -fx-border-radius: 10; -fx-border-width: 1.5; -fx-background-color: #f8f9fa; -fx-font-size: 13px;" />
                                                            </children>
                                                        </VBox>
                                                        <VBox spacing="8.0">
                                                            <children>
                                                                <Label style="-fx-font-weight: 500; -fx-text-fill: #2d3436; -fx-font-size: 13px;" text="Filter by Type" />
                                                                <ComboBox fx:id="reviewTypeFilterComboBox" onAction="#handleFilterReviewsByType" prefWidth="180.0" promptText="All Types" style="-fx-background-radius: 10; -fx-padding: 8; -fx-border-color: #dfe6e9; -fx-border-radius: 10; -fx-font-size: 13px;" />
                                                            </children>
                                                        </VBox>
                                                        <VBox spacing="8.0">
                                                            <children>
                                                                <Label style="-fx-font-weight: 500; -fx-text-fill: #2d3436; -fx-font-size: 13px;" text="Filter by Rating" />
                                                                <ComboBox fx:id="reviewRatingFilterComboBox" onAction="#handleFilterReviewsByRating" prefWidth="140.0" promptText="All Ratings" style="-fx-background-radius: 10; -fx-padding: 8; -fx-border-color: #dfe6e9; -fx-border-radius: 10; -fx-font-size: 13px;" />
                                                            </children>
                                                        </VBox>
                                                        <VBox spacing="8.0">
                                                            <children>
                                                                <Label style="-fx-text-fill: transparent;" text="." />
                                                                <HBox spacing="10.0">
                                                                    <children>
                                                                        <Button mnemonicParsing="false" onAction="#handleSearchReviews" style="-fx-background-color: #667eea; -fx-text-fill: white; -fx-padding: 10 20; -fx-background-radius: 10; -fx-cursor: hand; -fx-font-weight: 500;" text="ðŸ” Search" />
                                                                        <Button mnemonicParsing="false" onAction="#handleClearReviewFilters" style="-fx-background-color: #ecf0f1; -fx-text-fill: #636e72; -fx-padding: 10 20; -fx-background-radius: 10; -fx-cursor: hand; -fx-font-weight: 500;" text="Clear" />
                                                                    </children>
                                                                </HBox>
                                                            </children>
                                                        </VBox>
                                                    </children>
                                                </HBox>
                                            </children>
                                        </VBox>

                                        <!-- Action Buttons -->
                                        <HBox spacing="12.0">
                                            <children>
                                                <Button mnemonicParsing="false" onAction="#handleViewReviewDetails" style="-fx-background-color: #667eea; -fx-text-fill: white; -fx-font-weight: 500; -fx-padding: 12 24; -fx-background-radius: 10; -fx-cursor: hand;" text="ðŸ‘ï¸ View Details" />
                                                <Button mnemonicParsing="false" onAction="#handleDeleteSelectedReview" style="-fx-background-color: #ff7675; -fx-text-fill: white; -fx-font-weight: 500; -fx-padding: 12 24; -fx-background-radius: 10; -fx-cursor: hand;" text="ðŸ—‘ï¸ Delete Selected" />
                                            </children>
                                        </HBox>

                                        <!-- Reviews Table -->
                                        <VBox style="-fx-background-color: white; -fx-background-radius: 12; -fx-padding: 20; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.06), 10, 0, 0, 3);">
                                            <children>
                                                <TableView fx:id="reviewsTable" prefHeight="350.0" style="-fx-background-color: transparent;">
                                                    <columns>
                                                        <TableColumn fx:id="reviewUserColumn" prefWidth="150.0" text="User" />
                                                        <TableColumn fx:id="reviewTypeColumn" prefWidth="130.0" text="Type" />
                                                        <TableColumn fx:id="reviewRatingColumn" prefWidth="80.0" text="Rating" />
                                                        <TableColumn fx:id="reviewTitleColumn" prefWidth="200.0" text="Title" />
                                                        <TableColumn fx:id="reviewCommentColumn" prefWidth="300.0" text="Comment" />
                                                        <TableColumn fx:id="reviewDateColumn" prefWidth="140.0" text="Date" />
                                                    </columns>
                                                </TableView>
                                            </children>
                                        </VBox>
                                    </children>
                                </VBox>
                            </content>
                        </ScrollPane>
                    </content>
                </Tab>
                <Tab style="-fx-background-color: white; -fx-background-radius: 12 12 0 0; -fx-border-color: #667eea; -fx-border-width: 0 0 3 0; -fx-padding: 15 25; -fx-font-size: 14px; -fx-font-weight: 600;" text="  ðŸŽ« Bookings  ">
                    <content>
                        <ScrollPane fitToHeight="false" fitToWidth="true" style="-fx-background-color: #f7f9fc; -fx-background: #f7f9fc;">
                            <content>
                                <VBox spacing="25.0" style="-fx-padding: 30; -fx-background-color: #f7f9fc;">
                                    <children>
                                        <!-- Header Section -->
                                        <HBox alignment="CENTER_LEFT" spacing="15.0">
                                            <children>
                                                <VBox spacing="5.0">
                                                    <children>
                                                        <Label style="-fx-font-weight: 600; -fx-text-fill: #2d3436; -fx-font-size: 24px;" text="Bookings" />
                                                        <Label style="-fx-text-fill: #636e72; -fx-font-size: 13px;" text="View and manage all booking records" />
                                                    </children>
                                                </VBox>
                                                <Region HBox.hgrow="ALWAYS" />
                                                <Button mnemonicParsing="false" onAction="#handleRefreshBookings" style="-fx-background-color: white; -fx-text-fill: #667eea; -fx-padding: 12 24; -fx-background-radius: 10; -fx-cursor: hand; -fx-font-weight: 500; -fx-border-color: #667eea; -fx-border-radius: 10; -fx-border-width: 1.5;" text="ðŸ”„ Refresh" />
                                                <Button mnemonicParsing="false" onAction="#handleExportBookings" style="-fx-background-color: #667eea; -fx-text-fill: white; -fx-padding: 12 24; -fx-background-radius: 10; -fx-cursor: hand; -fx-font-weight: 500;" text="ðŸ“¥ Export" />
                                            </children>
                                        </HBox>

                                        <!-- Statistics Cards -->
                                        <HBox spacing="20.0">
                                            <children>
                                                <VBox alignment="CENTER" spacing="10.0" style="-fx-background-color: white; -fx-padding: 25; -fx-background-radius: 12; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.06), 10, 0, 0, 3);" HBox.hgrow="ALWAYS">
                                                    <children>
                                                        <Label style="-fx-background-color: #e3f2fd; -fx-text-fill: #1e88e5; -fx-padding: 12; -fx-background-radius: 12; -fx-font-size: 24px;" text="ðŸ“‹" />
                                                        <Label style="-fx-text-fill: #636e72; -fx-font-size: 12px; -fx-font-weight: 500;" text="TOTAL BOOKINGS" />
                                                        <Label fx:id="totalBookingsLabel" style="-fx-text-fill: #2d3436; -fx-font-size: 32px; -fx-font-weight: 700;" text="0" />
                                                    </children>
                                                </VBox>
                                                <VBox alignment="CENTER" spacing="10.0" style="-fx-background-color: white; -fx-padding: 25; -fx-background-radius: 12; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.06), 10, 0, 0, 3);" HBox.hgrow="ALWAYS">
                                                    <children>
                                                        <Label style="-fx-background-color: #e8f5e9; -fx-text-fill: #43a047; -fx-padding: 12; -fx-background-radius: 12; -fx-font-size: 24px;" text="âœ“" />
                                                        <Label style="-fx-text-fill: #636e72; -fx-font-size: 12px; -fx-font-weight: 500;" text="CONFIRMED" />
                                                        <Label fx:id="confirmedBookingsLabel" style="-fx-text-fill: #43a047; -fx-font-size: 32px; -fx-font-weight: 700;" text="0" />
                                                    </children>
                                                </VBox>
                                                <VBox alignment="CENTER" spacing="10.0" style="-fx-background-color: white; -fx-padding: 25; -fx-background-radius: 12; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.06), 10, 0, 0, 3);" HBox.hgrow="ALWAYS">
                                                    <children>
                                                        <Label style="-fx-background-color: #ffebee; -fx-text-fill: #e53935; -fx-padding: 12; -fx-background-radius: 12; -fx-font-size: 24px;" text="âœ•" />
                                                        <Label style="-fx-text-fill: #636e72; -fx-font-size: 12px; -fx-font-weight: 500;" text="CANCELLED" />
                                                        <Label fx:id="cancelledBookingsLabel" style="-fx-text-fill: #e53935; -fx-font-size: 32px; -fx-font-weight: 700;" text="0" />
                                                    </children>
                                                </VBox>
                                            </children>
                                        </HBox>

                                        <!-- Search and Filter Section -->
                                        <VBox spacing="15.0" style="-fx-background-color: white; -fx-padding: 25; -fx-background-radius: 12; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.06), 10, 0, 0, 3);">
                                            <children>
                                                <HBox alignment="CENTER_LEFT" spacing="15.0">
                                                    <children>
                                                        <VBox spacing="8.0" HBox.hgrow="ALWAYS">
                                                            <children>
                                                                <Label style="-fx-font-weight: 500; -fx-text-fill: #2d3436; -fx-font-size: 13px;" text="Search Bookings" />
                                                                <TextField fx:id="bookingSearchField" prefWidth="350.0" promptText="Search by user, movie, or booking ID..." style="-fx-background-radius: 10; -fx-padding: 10 15; -fx-border-color: #dfe6e9; -fx-border-radius: 10; -fx-border-width: 1.5; -fx-background-color: #f8f9fa; -fx-font-size: 13px;" />
                                                            </children>
                                                        </VBox>
                                                        <VBox spacing="8.0">
                                                            <children>
                                                                <Label style="-fx-font-weight: 500; -fx-text-fill: #2d3436; -fx-font-size: 13px;" text="Filter by Status" />
                                                                <ComboBox fx:id="bookingStatusFilterComboBox" onAction="#handleFilterBookingsByStatus" prefWidth="160.0" promptText="All" style="-fx-background-radius: 10; -fx-padding: 8; -fx-border-color: #dfe6e9; -fx-border-radius: 10; -fx-font-size: 13px;" />
                                                            </children>
                                                        </VBox>
                                                        <VBox spacing="8.0">
                                                            <children>
                                                                <Label style="-fx-text-fill: transparent;" text="." />
                                                                <HBox spacing="10.0">
                                                                    <children>
                                                                        <Button mnemonicParsing="false" onAction="#handleSearchBookings" style="-fx-background-color: #667eea; -fx-text-fill: white; -fx-padding: 10 20; -fx-background-radius: 10; -fx-cursor: hand; -fx-font-weight: 500;" text="ðŸ” Search" />
                                                                        <Button mnemonicParsing="false" onAction="#handleClearBookingSearch" style="-fx-background-color: #ecf0f1; -fx-text-fill: #636e72; -fx-padding: 10 20; -fx-background-radius: 10; -fx-cursor: hand; -fx-font-weight: 500;" text="Clear" />
                                                                    </children>
                                                                </HBox>
                                                            </children>
                                                        </VBox>
                                                    </children>
                                                </HBox>
                                            </children>
                                        </VBox>

                                        <!-- Action Buttons -->
                                        <HBox spacing="12.0">
                                            <children>
                                                <Button mnemonicParsing="false" onAction="#handleViewBookingDetails" style="-fx-background-color: #667eea; -fx-text-fill: white; -fx-font-weight: 500; -fx-padding: 12 24; -fx-background-radius: 10; -fx-cursor: hand;" text="ðŸ‘ï¸ View Details" />
                                                <Button mnemonicParsing="false" onAction="#handleCancelBooking" style="-fx-background-color: #ff7675; -fx-text-fill: white; -fx-font-weight: 500; -fx-padding: 12 24; -fx-background-radius: 10; -fx-cursor: hand;" text="âŒ Cancel Booking" />
                                            </children>
                                        </HBox>

                                        <!-- Bookings Table -->
                                        <VBox style="-fx-background-color: white; -fx-background-radius: 12; -fx-padding: 20; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.06), 10, 0, 0, 3);">
                                            <children>
                                                <TableView fx:id="bookingsTable" prefHeight="450.0" style="-fx-background-color: transparent;">
                                                    <columns>
                                                        <TableColumn fx:id="bookingIdColumn" prefWidth="90.0" style="-fx-alignment: CENTER;" text="ID" />
                                                        <TableColumn fx:id="bookingUserColumn" prefWidth="150.0" text="User" />
                                                        <TableColumn fx:id="bookingMovieColumn" prefWidth="180.0" text="Movie" />
                                                        <TableColumn fx:id="bookingScreenColumn" prefWidth="100.0" style="-fx-alignment: CENTER;" text="Screen" />
                                                        <TableColumn fx:id="bookingShowTimeColumn" prefWidth="150.0" text="Show Time" />
                                                        <TableColumn fx:id="bookingSeatsColumn" prefWidth="110.0" style="-fx-alignment: CENTER;" text="Seats" />
                                                        <TableColumn fx:id="bookingAmountColumn" prefWidth="100.0" style="-fx-alignment: CENTER-RIGHT;" text="Amount" />
                                                        <TableColumn fx:id="bookingDateColumn" prefWidth="150.0" text="Booking Date" />
                                                        <TableColumn fx:id="bookingStatusColumn" prefWidth="110.0" style="-fx-alignment: CENTER;" text="Status" />
                                                    </columns>
                                                </TableView>
                                            </children>
                                        </VBox>
                                    </children>
                                </VBox>
                            </content>
                        </ScrollPane>
                    </content>
                </Tab>
            </tabs>
        </TabPane>
    </center>
</BorderPane>
